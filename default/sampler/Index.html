<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aizen Sampler</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
    rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/jzz@1.8.9"></script>
  <script src="https://cdn.jsdelivr.net/npm/jzz@1.8.9/dist/JZZ.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jzz-synth-osc@1.3.6/dist/JZZ.synth.OSC.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jzz-synth-tiny@1.2.2/dist/JZZ.synth.Tiny.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jzz@1.8.9/dist/JZZ.input.Knobs.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jzz@1.8.9/dist/JZZ.input.Qwerty.js"></script>

  <!-- Local CSS (same folder as this file) -->
  <link rel="stylesheet" href="./sampler.css" />

  <!-- Material Symbols (icons) -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

  <!-- MDUI (Material 3 Web Components) -->
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/mdui/2.1.4/mdui.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mdui/2.1.4/mdui.global.js"></script>
</head>

<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="brand-title">
          <span class="logo">
            <span class="material-symbols-outlined logo-icon">dark_mode</span>
            <span class="logo-text logo-A">A</span>
            <span class="logo-text logo-accent">I</span>
            <span class="logo-stack">
              <span class="logo-text z-behind">Z</span>
              <span class="material-symbols-outlined logo-icon bolt">bolt</span>
            </span>
            <span class="logo-text logo-accent">E</span>
            <span class="logo-text logo-N">N</span>
            <span class="material-symbols-outlined logo-icon">sword_rose</span>
          </span>
        </div>
        <div class="brand-sub">Best Fucking Sampler in the World! Import your shitty samples and make your own beats!</div>
      </div>

      <div class="actions">
        <mdui-button id="resumeAudio" variant="tonal">
          <span class="material-symbols-outlined" slot="icon">play_arrow</span>
          Resume Jam
        </mdui-button>
        <mdui-button id="pianoMode" variant="tonal">
          <span class="material-symbols-outlined" slot="icon">piano</span>
          Keys
        </mdui-button>

        <mdui-button id="stopAll" variant="filled">
          <span class="material-symbols-outlined" slot="icon">stop</span>
          Stop All
        </mdui-button>
      </div>
    </header>

    <main class="main">
      <section class="card">
        <div class="card-head">
          <div class="card-title">PADS</div>
          <div class="card-hint">Click-2-Trigger • Keyboard Keys: 1-4 (top row) / QWER / ASDF / ZXCV (bottom row) • Space = stop</div>
        </div>

        <div id="grid" class="grid" aria-label="Pad grid"></div>
      </section>

      <section class="card panel">
        <div class="card-head">
          <div class="card-title">Sample</div>
          <div class="card-hint">Waveform & controls</div>
        </div>

        <div class="panel-body">
          <div class="audio-window">
            <div class="audio-window-title">Audio Editor Window</div>
            <div id="vuWindow" class="vu-window" aria-label="Visual volume display">
              <div class="bars">
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
              </div>
            </div>
          </div>

          <canvas id="waveform" width="720" height="120"></canvas>

          <div class="panel-buttons">
            <button id="prevSample" class="mdui-btn" aria-label="Previous Sample">◀</button>
            <button id="oneShot" class="mdui-btn" aria-pressed="false">ONE SHOT</button>
            <button id="reverse" class="mdui-btn" aria-pressed="false">REVERSE</button>
            <button id="loop" class="mdui-btn" aria-pressed="false">LOOP</button>
            <button id="nextSample" class="mdui-btn" aria-label="Next Sample">▶</button>
          </div>

          <div class="panel-controls">
            <div>
              <label for="vol">VOL</label>
              <input id="vol" type="range" min="0" max="2" step="0.01" value="1">
            </div>
            <div>
              <label for="pitch">PITCH</label>
              <input id="pitch" type="range" min="-12" max="12" step="0.1" value="0">
            </div>
            <div>
              <label for="pan">PAN</label>
              <input id="pan" type="range" min="-1" max="1" step="0.01" value="0">
            </div>
          </div>

          <div class="panel-tank">
            <button id="openSampleDrawer" class="mdui-btn" type="button">
              <span class="material-symbols-outlined" slot="icon">unfold_more</span>
              Sample Tank
            </button>
          </div>

          <pre id="meta" class="meta">Loading…</pre>
        </div>
      </section>
    </main>

    <div id="sampleDrawer" class="sample-drawer" aria-hidden="true">
      <div class="drawer-head">
        <div class="drawer-title">Sample Tank</div>
        <button id="closeSampleDrawer" class="drawer-icon" aria-label="Close sample drawer">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
      <div class="drawer-body">
        <button id="drawerHandle" class="drawer-handle" aria-label="Toggle sample drawer">
          <span class="material-symbols-outlined">unfold_less</span>
        </button>
        <div id="sampleList" class="drawer-list"></div>
      </div>
    </div>

    <div id="pianoOverlay" class="piano-overlay" aria-hidden="true">
      <div class="piano-shell">
        <div class="piano-header">
          <div class="piano-title">
            <span class="material-symbols-outlined">piano</span>
            Keyboard
          </div>
          <div class="piano-controls">
            <label for="scaleMode">Scale</label>
            <select id="scaleMode">
              <option value="chromatic">Chromatic</option>
              <option value="major">Major</option>
              <option value="minor">Minor</option>
              <option value="harmonic-minor">Harmonic Minor</option>
              <option value="pentatonic">Pentatonic</option>
              <option value="whole-tone">Whole Tone</option>
            </select>
            <button id="closePianoOverlay" class="drawer-icon" aria-label="Close keyboard">
              <span class="material-symbols-outlined">close</span>
            </button>
          </div>
        </div>

        <div class="piano-row controls-row">
          <div class="piano-drops">
            <label>System</label>
            <select id="midiSystem">
              <option value="GM">GM</option>
              <option value="GM2">GM2</option>
              <option value="GS">GS</option>
              <option value="XG">XG</option>
            </select>
          </div>
          <div class="piano-drops">
            <label>Bank MSB</label>
            <select id="bankMsb">
              <option value="0">0</option>
            </select>
          </div>
          <div class="piano-drops">
            <label>Bank LSB</label>
            <select id="bankLsb">
              <option value="0">0</option>
            </select>
          </div>
          <div class="piano-drops wide">
            <label>Program</label>
            <select id="programSelect"></select>
          </div>
          <div class="piano-drops">
            <label>MIDI Out</label>
            <select id="midiOutSelect">
              <option value="tiny">Tiny</option>
              <option value="osc">OSC</option>
            </select>
          </div>
        </div>

        <div class="piano-row knob-row">
          <div class="knob">
            <div class="knob-face" data-param="volume"></div>
            <div class="knob-label">Volume</div>
          </div>
          <div class="knob">
            <div class="knob-face" data-param="limiter"></div>
            <div class="knob-label">Limiter</div>
          </div>
          <div class="knob">
            <div class="knob-face" data-param="crunch"></div>
            <div class="knob-label">Crunch</div>
          </div>
          <div class="knob-spacer"></div>
          <div class="knob">
            <div class="knob-face" data-param="power"></div>
            <div class="knob-label">Power</div>
          </div>
          <div class="knob">
            <div class="knob-face" data-param="pan"></div>
            <div class="knob-label">Pan</div>
          </div>
        </div>

        <div class="piano-body">
          <div id="pianoKeys" class="piano-keys">
            <div id="cssPiano" class="css-piano" aria-hidden="true">
              <div class="css-piano__deck">
                <div class="css-piano__glow"></div>
                <div class="css-piano__brand">Aizen Keys</div>
                <div class="css-piano__keys">
                  <div class="css-piano__whites">
                    <span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span>
                    <span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span>
                  </div>
                  <div class="css-piano__blacks">
                    <span class="css-key black" style="--i:0"></span>
                    <span class="css-key black" style="--i:1"></span>
                    <span class="css-key black" style="--i:3"></span>
                    <span class="css-key black" style="--i:4"></span>
                    <span class="css-key black" style="--i:5"></span>
                    <span class="css-key black" style="--i:7"></span>
                    <span class="css-key black" style="--i:8"></span>
                    <span class="css-key black" style="--i:10"></span>
                    <span class="css-key black" style="--i:11"></span>
                    <span class="css-key black" style="--i:12"></span>
                  </div>
                </div>
              </div>
              <div id="cssPianoStatus" class="css-piano__status" role="status"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
