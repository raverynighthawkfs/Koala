<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ohtani Sampler</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
    rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/tone@14.7.77/build/Tone.js"></script>

  <!-- Local CSS (same folder as this file) -->
  <link rel="stylesheet" href="./sampler.css" />

  <!-- Material Symbols (icons) -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

  <!-- MDUI (Material 3 Web Components) -->
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/mdui/2.1.4/mdui.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mdui/2.1.4/mdui.global.js"></script>
</head>

<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="brand-title">
          <span class="logo">
            <span class="material-symbols-outlined logo-icon">dark_mode</span>
            <span class="logo-text logo-A">O</span>
            <span class="logo-text logo-accent">T</span>
            <span class="logo-stack">
              <span class="logo-text z-behind">A</span>
              <span class="material-symbols-outlined logo-icon bolt">bolt</span>
            </span>
            <span class="logo-text logo-accent">N</span>
            <span class="logo-text logo-N">I</span>
            <span class="material-symbols-outlined logo-icon">sword_rose</span>
          </span>
        </div>
        <div class="brand-sub">Best Fucking Sampler in the World! Import your shitty samples and make your own beats!</div>
      </div>

      <div class="actions">
        <mdui-button id="pianoMode" variant="tonal">
          <span class="material-symbols-outlined" slot="icon">piano</span>
          Keys
        </mdui-button>
        <mdui-button id="sequenceMode" variant="tonal">
          <span class="material-symbols-outlined" slot="icon">list</span>
          Sequencer
        </mdui-button>
        <mdui-button id="fxMode" variant="tonal">
          <span class="material-symbols-outlined" slot="icon">graphic_eq</span>
          FX
        </mdui-button>
        <mdui-button id="resumeAudio" variant="tonal">
          <span class="material-symbols-outlined" slot="icon">play_arrow</span>
          Resume Jam
        </mdui-button>

        <mdui-button id="stopAll" variant="filled">
          <span class="material-symbols-outlined" slot="icon">stop</span>
          Stop All
        </mdui-button>
      </div>
    </header>

    <main class="main">
      <section class="card">
        <div class="card-head">
          <div class="card-title">PADS</div>
          <div class="card-hint">Click-2-Trigger • Keyboard Keys: 1-4 (top row) / QWER / ASDF / ZXCV (bottom row) • Space = stop</div>
        </div>

        <div id="grid" class="grid" aria-label="Pad grid"></div>
        <button id="mixerTab" class="mixer-tab" type="button" aria-label="Open mixer">Mixer</button>
      </section>

      <section class="card panel">
        <div class="card-head">
          <div class="card-title">Sample</div>
          <div class="card-hint">Waveform & controls</div>
        </div>

        <div class="panel-body">
          <div class="audio-window">
            <div class="audio-tabs">
              <button id="tabSample" class="tab-btn active" type="button">SAMPLE</button>
              <button id="tabEdit" class="tab-btn" type="button">EDIT</button>
            </div>
            <div class="audio-window-title">Audio Editor Window</div>
            <div id="vuWindow" class="vu-window" aria-label="Visual volume display">
              <div class="bars">
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
                <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
              </div>
            </div>
            <div class="audio-panels">
              <div id="panelSample" class="audio-panel active">
                <div class="eq-placeholder">EQ / FILTER (UI placeholder)</div>
                <div class="eq-actions">
                  <button class="eq-pill">ENABLED</button>
                  <button class="eq-pill ghost">RESET EQ</button>
                  <button class="eq-pill">MAIN</button>
                </div>
              </div>
              <div id="panelEdit" class="audio-panel">
                <pre class="meta meta-edit" aria-label="Sample meta info"></pre>
              </div>
            </div>
          </div>

          <div class="wave-wrap">
            <div id="waveInfo" class="wave-info"></div>
            <canvas id="waveform" width="720" height="140"></canvas>
          </div>

          <div class="panel-buttons pill-row">
            <button id="prevSample" class="pill-btn" aria-label="Previous Sample">◀</button>
            <button id="oneShot" class="pill-btn" aria-pressed="false">ONE SHOT</button>
            <button id="reverse" class="pill-btn" aria-pressed="false">REVERSE</button>
            <button id="loop" class="pill-btn" aria-pressed="false">LOOP</button>
            <button id="nextSample" class="pill-btn" aria-label="Next Sample">▶</button>
          </div>

          <div class="panel-controls circle-row">
            <div class="circle-control">
              <label for="vol">VOL</label>
              <input id="vol" type="range" min="0" max="2" step="0.01" value="1">
            </div>
            <div class="circle-control">
              <label for="pitch">PITCH</label>
              <input id="pitch" type="range" min="-12" max="12" step="0.1" value="0">
            </div>
            <div class="circle-control">
              <label for="pan">PAN</label>
              <input id="pan" type="range" min="-1" max="1" step="0.01" value="0">
            </div>
            <div class="edit-stack">
              <button id="editSample" class="pill-btn">EDIT</button>
              <button id="deleteSample" class="pill-btn danger">DELETE</button>
            </div>
          </div>

          <div class="panel-tank">
            <button id="openSampleDrawer" class="pill-btn" type="button">
              <span class="material-symbols-outlined" slot="icon">unfold_more</span>
              SAMPLE TANK
            </button>
          </div>

          <pre id="meta" class="meta">Loading…</pre>
        </div>
      </section>
    </main>

    <div id="sampleDrawer" class="sample-drawer" aria-hidden="true">
      <div class="drawer-head">
        <div class="drawer-title">Sample Tank</div>
        <button id="closeSampleDrawer" class="drawer-icon" aria-label="Close sample drawer">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
      <div class="drawer-body">
        <button id="drawerHandle" class="drawer-handle" aria-label="Toggle sample drawer">
          <span class="material-symbols-outlined">unfold_less</span>
        </button>
        <div id="sampleList" class="drawer-list"></div>
      </div>
    </div>

    <div id="pianoOverlay" class="piano-overlay" aria-hidden="true">
      <div class="piano-shell">
        <div class="piano-header">
          <div class="piano-title">
            <span class="material-symbols-outlined">piano</span>
            Keyboard
          </div>
        
            <button id="closePianoOverlay" class="drawer-icon" aria-label="Close keyboard">
              <span class="material-symbols-outlined">close</span>
            </button>
          </div>
        </div>

        <div class="piano-row controls-row piano-controls-row">
          <div class="piano-drops">
            <label>Scale</label>
            <select id="scaleMode">
              <option value="chromatic">Chrome-Addict</option>
              <option value="major">Major Fahkin Dilemma</option>
              <option value="minor">Minor Fahkin Threat</option>
              <option value="harmonic-minor">Harmonic A Minorrrr</option>
              <option value="pentatonic">Pent-House-A-Tonic</option>
              <option value="whole-tone">Butt Hole I-O Tone Y-O</option>
            </select>
          </div>
          <div class="piano-drops">
            <label>Octave</label>
            <select id="octaveSelect">
              <option value="3">LOWZ</option>
              <option value="4" selected>MEDZ</option>
              <option value="5">HIGH</option>
            </select>
          </div>
          <div class="piano-drops">
            <label>Wave</label>
            <select id="waveSelect">
              <option value="triangle">Triangle</option>
              <option value="sine">Sine</option>
              <option value="square">Square</option>
              <option value="sawtooth">Saw</option>
            </select>
          </div>
          <div class="piano-drops sampler-drops">
            <label>Sampler</label>
            <button id="backToSampler" class="sampler-btn" type="button">
              <span class="material-symbols-outlined">blur_on</span>
              SAMPLER
            </button>
          </div>
        </div>


        <div class="piano-row knob-row">
          <div class="knob">
            <div class="knob-face" data-param="volume"></div>
            <div class="knob-label">Volume</div>
          </div>
          <div class="knob">
            <div class="knob-face" data-param="limiter"></div>
            <div class="knob-label">Limiter</div>
          </div>
          <div class="knob">
            <div class="knob-face" data-param="crunch"></div>
            <div class="knob-label">Crunch</div>
          </div>
          <div class="knob">
            <div class="knob-face" data-param="distortion"></div>
            <div class="knob-label">Distortion</div>
          </div>
          <div class="knob-spacer"></div>
          <div class="knob">
            <div class="knob-face" data-param="power"></div>
            <div class="knob-label">Power</div>
          </div>
          <div class="knob">
            <div class="knob-face" data-param="pan"></div>
            <div class="knob-label">Pan</div>
          </div>
        </div>
        <div class="piano-load">
          <div class="piano-load-label">Loaded Sample for Keys:</div>
          <div id="pianoSampleLabel" class="piano-load-name">None (click a pad piano badge)</div>
        </div>

        <div class="audio-window piano-audio-window">
          <div class="audio-window-title">Piano Audio Window</div>
          <div id="pianoVuWindow" class="vu-window" aria-label="Piano visual volume display">
            <div class="bars">
              <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
              <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
              <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
              <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
              <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
              <span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span>
            </div>
          </div>
          <canvas id="pianoWaveform" width="720" height="120"></canvas>
        </div>

        <div class="piano-body">
          <div id="pianoKeys" class="piano-keys">
            <div id="cssPiano" class="css-piano" aria-hidden="true">
              <div class="css-piano__deck">
                <div class="css-piano__glow"></div>
                <div class="css-piano__brand">Made by Ohtani</div>
                <div class="css-piano__keys">
                  <div class="css-piano__whites">
                    <span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span>
                    <span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span>
                    <span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span><span class="css-key white"></span>
                  </div>
                  <div class="css-piano__blacks">
                    <span class="css-key black" style="--i:0"></span>
                    <span class="css-key black" style="--i:1"></span>
                    <span class="css-key black" style="--i:3"></span>
                    <span class="css-key black" style="--i:4"></span>
                    <span class="css-key black" style="--i:5"></span>
                    <span class="css-key black" style="--i:7"></span>
                    <span class="css-key black" style="--i:8"></span>
                    <span class="css-key black" style="--i:10"></span>
                    <span class="css-key black" style="--i:11"></span>
                    <span class="css-key black" style="--i:12"></span>
                    <span class="css-key black" style="--i:14"></span>
                    <span class="css-key black" style="--i:15"></span>
                    <span class="css-key black" style="--i:17"></span>
                    <span class="css-key black" style="--i:18"></span>
                    <span class="css-key black" style="--i:19"></span>
                  </div>
                </div>
              </div>
              <div id="cssPianoStatus" class="css-piano__status" role="status"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="sequencerOverlay" class="sequencer-overlay" aria-hidden="true">
      <div class="seq-shell">
        <header class="seq-head">
          <div class="seq-head-left">
            <button id="seqPlay" class="seq-btn" aria-label="Play sequence">
              <span class="material-symbols-outlined">play_arrow</span>
            </button>
            <button id="seqStop" class="seq-btn" aria-label="Stop sequence">
              <span class="material-symbols-outlined">stop</span>
            </button>
            <div class="seq-bpm">
              <span id="seqBpmDisplay">120</span> BPM
              <button id="seqMetro" class="seq-btn ghost" aria-label="Toggle metronome">
                <span class="material-symbols-outlined">metronome</span>
              </button>
            </div>
          </div>
          <button id="closeSequencer" class="drawer-icon" aria-label="Close sequencer">
            <span class="material-symbols-outlined">close</span>
          </button>
        </header>

        <div class="seq-slots">
          <button class="seq-slot" data-slot="0"></button>
          <button class="seq-slot" data-slot="1"></button>
          <button class="seq-slot" data-slot="2"></button>
          <button class="seq-slot" data-slot="3"></button>
          <button class="seq-slot" data-slot="4"></button>
          <button class="seq-slot" data-slot="5"></button>
          <button class="seq-slot" data-slot="6"></button>
          <button class="seq-slot" data-slot="7"></button>
        </div>

        <div class="seq-toolbar">
          <button id="seqToPiano" class="seq-tab">
            <span class="material-symbols-outlined">piano</span>
          </button>
          <button id="seqUndo" class="seq-tab">UNDO</button>
          <button id="seqClear" class="seq-tab">CLEAR</button>
          <select id="seqBars" class="seq-select">
            <option value="1">1 BAR</option>
            <option value="2">2 BAR</option>
            <option value="4">4 BAR</option>
            <option value="8">8 BAR</option>
          </select>
        </div>

        <div class="seq-grid" id="seqGrid" aria-label="Sequencer grid"></div>
      </div>
    </div>

    <div id="fxOverlay" class="fx-overlay" aria-hidden="true">
      <div class="fx-shell">
        <header class="fx-head">
          <div class="fx-title">
            <span class="material-symbols-outlined">bolt</span>
            Sound FX
          </div>
          <button id="closeFx" class="drawer-icon" aria-label="Close FX">
            <span class="material-symbols-outlined">close</span>
          </button>
        </header>

        <div class="fx-io">
          <button class="fx-toggle"><span class="material-symbols-outlined">mic</span> Mic</button>
          <button class="fx-toggle"><span class="material-symbols-outlined">headphones</span> Phones</button>
        </div>

        <div class="fx-grid">
          <button class="fx-btn">More Bass</button>
          <button class="fx-btn">More Treble</button>
          <button class="fx-btn">Fuzz</button>
          <button class="fx-btn">Robot</button>
          <button class="fx-btn">Reverb</button>
          <button class="fx-btn">8ve Up</button>
          <button class="fx-btn">8ve Down</button>
          <button class="fx-btn">Bass Synth</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
